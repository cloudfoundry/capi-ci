---
resources:
  - name: daily
    type: time
    icon: clock-outline
    source:
      interval: 24h
  - name: capi-ci-private
    type: git
    icon: git
    source:
      uri: git@github.com:cloudfoundry/capi-ci-private.git
      private_key: ((ari-wg-gitbot-github-ssh-key.private_key))
      branch: main
  - name: runtime-ci
    type: git
    icon: git
    source:
      uri: https://github.com/cloudfoundry/runtime-ci.git
      branch: main
jobs:
  - name: validate-certs
    serial: true
    public: true
    plan:
      - in_parallel:
          - get: daily
            trigger: true
          - get: capi-ci-private
            trigger: true
          - get: runtime-ci
            trigger: true
      - task: validate-certs
        file: runtime-ci/tasks/check-certs/task.yml
        input_mapping:
          relint-envs: capi-ci-private
        params:
          DAYS_LEFT_THRESHOLD: 16
          PATH_TO_VERIFY: relint-envs
